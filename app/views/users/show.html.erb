<%= stylesheet_link_tag "style2.css" %>

<section class="vh-100" style="background-color: white;">
  <div class="container py-5 h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-md-12 col-xl-4">

        <div class="card20" style="border-radius: 15px;">
          <div class="card-body text-center">
            <div class="mt-3 mb-4">
              <%= image_tag(@user.avatar_thumbnail)%>
                
            </div>
            <h4 class="mb-2"><%= @user.username %></h4>

            <%if @user == current_user %>
             <%= link_to "Edit Profile", edit_user_registration_path %>
          <% end %>
          <br>


            <% if @user != current_user %>

    
             <% if current_user.following?(@user) %>
             <%= button_to "Unfollow", unfollow_user_path(@user), method: :delete , id:"button2"%>

             <% else %>
             <%= button_to "Follow", follow_user_path(@user) , method: :post , id:"button2" %>
             <% end %>
    
          <% end %>

          <% if @user == current_user %>
              <%= link_to 'Aggiungi Libro', new_book_path %>
          <%end%>


            <div class="d-flex justify-content-between text-center mt-5 mb-2">
              <div>
                <p class="mb-2 h5"><%= @user.followers_count %></p>
                <p class="text-muted mb-0">Followers</p>
              </div>
              <div class="px-3">
                <p class="mb-2 h5"><%= @user.following_by_type('User').size %></p>
                <p class="text-muted mb-0">Following</p>
              </div>
            </div>

      

              </div>
            </div>
          </div>
        </div>

      </div>
</section>

  


      
   


<div class="fraseuser3">
<u><h2>Favorite books:</h2></u>
</div>
<br>
<% @user.following_by_type('Book').each do |book| %>
  <div class="card2" id="blocco2">
  <div class="card-body">
  <div class="card-title2">
    <%= book.titolo %>
  </div>
  </div>
  </div>
  
<%end%>
<hr>

<section class="container">
<div class= "container px-4 px-lg-5 mt-5">
  <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
    <% Book.all.each do |book| %>
    <div class="col mb-5">

       <% if book.user == @user %>

          <div class="libro lg-4 md-4">
            <div class="card" style="width: 18rem;"><%= image_tag book.cover.url(:medium), class: "card-img-sm-left" %>
              <div class="card-body" style = "padding: 0.5em 1.2em;">
               <h4 class="card-title h5 h4-sm"><%= book.titolo %></h4>
               <h6 class="card-subtitle mb-2 text-muted">By: <%= book.user.username %></h6>
                 <div class="card-text">
                    Genere: <%= book.genere %>
                 </div>
              <p class="card-text">Trama?</p>
                <%= link_to "Leggi", book , class:"card-link" %>
                <br>
               <% if book.user == current_user %>
                    <%= link_to "Edit", edit_book_path(book) %>
                    <%= button_to "Destroy", book, method: :delete %>
                <%end%>

              </div>

            </div>

          </div>

        <% end %> 
       
    </div>

    <% end %>
   </div>
</div>
</section>

